<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <title>Learn Sanskrit</title>
  <link rel="stylesheet" type="text/css" href="/assets/style.css">
  <script src="https://ajax.googleapis.com/ajax/libs/webfont/1.6.26/webfont.js"></script>
  <!-- Favicon/PWA stuff -->
  <link rel="apple-touch-icon" sizes="180x180" href="/apple-touch-icon.png">
  <link rel="manifest" href="/manifest.json">
  <meta name="theme-color" content="#ff1A00">
</head>
<body>
<div id="primarykeyboard" class="keyboard"></div>
<div id="shiftkeyboard" class="keyboard" style="z-indez: 2; display: none"></div>
<div id="q1" style="display: none">
  लिखें - कमलनयनः। kamalanayanaḥ.
  <div class="inputplace"></div>
  <div class="answer">kamalanayanaḥ</div>
</div>
<div id="q2" style="display: none">
  रामः। rāmaḥ.
  <div class="inputplace"></div>
  <div class="answer">rāmaḥ</div>
</div>
<div id="q3" style="display: none">
  bāḍham!
  <div class="answer">t</div>
</div>
<div id="space">
</div>
  <script src="assets/index.js" async></script>
  <script>
  // Check that service workers are supported
  if ('serviceWorker' in navigator) {
    // Use the window load event to keep the page load performant
    window.addEventListener('load', () => {
      navigator.serviceWorker.register('/service-worker.js');
    });
  }
  </script>
  <script type="module">
  import {Workbox} from 'https://storage.googleapis.com/workbox-cdn/releases/4.1.0/workbox-window.prod.mjs';

  if ('serviceWorker' in navigator) {
    const wb = new Workbox('/sw.js');

    // Add an event listener to detect when the registered
    // service worker has installed but is waiting to activate.
    wb.addEventListener('waiting', (event) => {
      // `event.wasWaitingBeforeRegister` will be false if this is
      // the first time the updated service worker is waiting.
      // When `event.wasWaitingBeforeRegister` is true, a previously
      // updated same service worker is still waiting.
      // You may want to customize the UI prompt accordingly.

      // Assumes your app has some sort of prompt UI element
      // that a user can either accept or reject.
      const prompt = createUIPrompt({
        onAccept: async () => {
          // Assuming the user accepted the update, set up a listener
          // that will reload the page as soon as the previously waiting
          // service worker has taken control.
          wb.addEventListener('controlling', (event) =>   {
            window.location.reload();
          });

          // Send a message telling the service worker to skip waiting.
          // This will trigger the `controlling` event handler above.
          // Note: for this to work, you have to add a message
          // listener in your service worker. See below.
          wb.messageSW({type: 'SKIP_WAITING'});
        },

        onReject: () => {
          prompt.dismiss();
        }
      })
    });

    wb.register();
  }
  </script>
</body>
</html>
